name: cicd

on:
  - push

jobs:

  Deploy_To_Dev:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        deployment_target:
          - "hello-world-app"
      fail-fast: false

    steps:
      - name: Checkout Source
        uses: actions/checkout@v4

      - name: Generate Manifests
        run: |
          .github/workflows/utils/generate-manifests.py \
            ${{ github.workspace }}/deploymentTargets/${{ matrix.deployment_target }} \
            ${{ github.workspace }}/charts/${{ matrix.deployment_target }} \
            ${{ github.workspace }}/generated_manifests